# segment.rules file assigns source code modules to specific banks
# segment.rules is constructed from any segment.rules found in the search path
# the search path is defined in Makefile.cc2430
# segment.rules get processed by a perl snippet listed in the Makefile.cc2430
# the processed output is put into the obj_* directory
# comments starting with "#" are supported
# perl regular expression matching can be used on the file name specification
# 
# general rules --
#  This file is only used when the Makefile defines HAVE_BANKING=1
#  Some code must be placed in all banks (or SDCC/aslink will complain at link time)
#  Interrupt code must be in HOME/CSEG/BANK0
#

# Files with ISRs must be in HOME
HOME intr.c   # Match all files ending in intr.c (e.g. uart_intr.c)
HOME rtimer-arch.c
HOME watchdog-cc2430.c
HOME clock.c

# Some cc2430 which need special treatment
HOME bus.c    # bus.c::flash_read() must be run from HOME (if compiled in)

# In HOME for bank overflow reasons
BANK2 disco.c

# Put the rest of cpu/cc2430 in BANK3
BANK3 cpu/cc2430

HOME sicslowpan.c
BANK1 tcpip.c
BANK1 uip6.c
BANK1 nullrdc.c
BANK2 m25p16.c

# Wildcard rules for anything that hasn't matched so far
#BANK1 core/net/mac
BANK1 core/net/rime
BANK3 core/net/rpl
BANK2 core/net
BANK1 core/          # Crucial and frequently called core functions in HOME
HOME .               # Everything else in HOME
